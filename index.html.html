<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –î–Ω–µ–≤–Ω–∏–∫ –£—Å–ø–µ—Ö–∞</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text: #1f2937;
            --text-light: #6b7280;
            --success: #10b981;
            --border-radius: 12px;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: var(--card-bg);
            width: 100%;
            max-width: 500px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Header & Rank Styles */
        header {
            text-align: center;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 20px;
        }

        h1 { margin: 0; font-size: 24px; color: var(--text); }
        
        .rank-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 10px;
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.3);
            transition: transform 0.3s;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-light);
        }

        .stat-number {
            font-size: 18px;
            font-weight: bold;
            color: var(--text);
        }

        /* Input Area */
        .input-group {
            display: flex;
            gap: 10px;
        }

        input[type="text"] {
            flex-grow: 1;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
        }

        button#add-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 24px;
            transition: background 0.2s;
        }

        button#add-btn:hover {
            background: var(--primary-hover);
        }

        /* List Styles */
        .list-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .date-header {
            font-size: 14px;
            color: var(--text-light);
            margin: 15px 0 5px 0;
            font-weight: bold;
            border-bottom: 1px solid #eee;
        }

        .entry-item {
            background: #f9fafb;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid var(--success);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            font-size: 18px;
            opacity: 0.5;
            transition: opacity 0.2s;
        }

        .delete-btn:hover { opacity: 1; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Progress Bar */
        .progress-container {
            background-color: #e5e7eb;
            border-radius: 10px;
            height: 8px;
            width: 100%;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-bar {
            background-color: var(--success);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }
        
        .next-level-text {
            font-size: 12px;
            color: var(--text-light);
            text-align: center;
            margin-top: 5px;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üèÜ –î–Ω–µ–≤–Ω–∏–∫ –£—Å–ø–µ—Ö–∞</h1>
        <div id="rankBadge" class="rank-badge">–ù–∞—á–∞–ª–æ –ø—É—Ç–∏</div>
        
        <div class="stats">
            <div>–í—Å–µ–≥–æ —É—Å–ø–µ—Ö–æ–≤: <span id="totalCount" class="stat-number">0</span></div>
            <div>–°–µ–≥–æ–¥–Ω—è: <span id="todayCount" class="stat-number">0</span></div>
        </div>

        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        <div id="nextLevelInfo" class="next-level-text">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: 10</div>
    </header>

    <div class="input-group">
        <input type="text" id="entryInput" placeholder="–ß—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–¥–µ–ª–∞–ª —Å–µ–≥–æ–¥–Ω—è?">
        <button id="add-btn">+</button>
    </div>

    <div id="journalList" class="list-container">
        </div>
</div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    let entries = JSON.parse(localStorage.getItem('success_journal_data')) || [];

    const input = document.getElementById('entryInput');
    const addBtn = document.getElementById('add-btn');
    const listContainer = document.getElementById('journalList');
    const totalCountEl = document.getElementById('totalCount');
    const todayCountEl = document.getElementById('todayCount');
    const rankBadge = document.getElementById('rankBadge');
    const progressBar = document.getElementById('progressBar');
    const nextLevelInfo = document.getElementById('nextLevelInfo');

    // –°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤
    const ranks = [
        { limit: 0, title: "–ù–∞—á–∞–ª–æ –ø—É—Ç–∏ üë∂" },
        { limit: 10, title: "–ö—Ä–∞—Å–∞–≤—á–∏–∫ üòé" },
        { limit: 30, title: "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∞—è –º–∞—à–∏–Ω–∞ ü§ñ" },
        { limit: 60, title: "–õ–∏–¥–µ—Ä –∂–∏–∑–Ω–∏ ü¶Å" },
        { limit: 100, title: "–õ–µ–≥–µ–Ω–¥–∞ üëë" },
        { limit: 500, title: "–ë–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚ö°" }
    ];

    // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
    function addEntry() {
        const text = input.value.trim();
        if (!text) return;

        const now = new Date();
        const entry = {
            id: Date.now(),
            text: text,
            date: now.toLocaleDateString('ru-RU'), // –î–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
            fullDate: now // –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        };

        entries.unshift(entry); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
        saveData();
        render();
        input.value = '';
        input.focus();
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    function deleteEntry(id) {
        if(confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')) {
            entries = entries.filter(e => e.id !== id);
            saveData();
            render();
        }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage
    function saveData() {
        localStorage.setItem('success_journal_data', JSON.stringify(entries));
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–Ω–≥–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    function updateStats() {
        const total = entries.length;
        const todayStr = new Date().toLocaleDateString('ru-RU');
        const todayTotal = entries.filter(e => e.date === todayStr).length;

        totalCountEl.innerText = total;
        todayCountEl.innerText = todayTotal;

        // –õ–æ–≥–∏–∫–∞ —Ä–∞–Ω–≥–æ–≤
        let currentRank = ranks[0];
        let nextRank = ranks[1];

        for (let i = 0; i < ranks.length; i++) {
            if (total >= ranks[i].limit) {
                currentRank = ranks[i];
                nextRank = ranks[i+1] || { limit: total * 2, title: "–ú–∞–∫—Å–∏–º—É–º" }; // Fallback
            }
        }

        rankBadge.innerText = currentRank.title;

        // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞
        if (nextRank) {
            const prevLimit = currentRank.limit;
            const nextLimit = nextRank.limit;
            const range = nextLimit - prevLimit;
            const currentProgress = total - prevLimit;
            const percentage = Math.min(100, Math.max(0, (currentProgress / range) * 100));
            
            progressBar.style.width = percentage + '%';
            nextLevelInfo.innerText = `–î–æ —É—Ä–æ–≤–Ω—è "${nextRank.title}": –µ—â—ë ${nextLimit - total}`;
        }
        
        // –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 10 (–ö—Ä–∞—Å–∞–≤—á–∏–∫)
        if (total === 10 && !localStorage.getItem('alertShown10')) {
            alert("–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ö—Ä–∞—Å–∞–≤—á–∏–∫! üòé");
            localStorage.setItem('alertShown10', 'true');
        }
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞
    function render() {
        listContainer.innerHTML = '';
        let lastDate = null;

        entries.forEach(entry => {
            // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
            if (entry.date !== lastDate) {
                const dateHeader = document.createElement('div');
                dateHeader.className = 'date-header';
                // –ü–∏—à–µ–º "–°–µ–≥–æ–¥–Ω—è" –µ—Å–ª–∏ –¥–∞—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
                const isToday = entry.date === new Date().toLocaleDateString('ru-RU');
                dateHeader.innerText = isToday ? `–°–µ–≥–æ–¥–Ω—è (${entry.date})` : entry.date;
                listContainer.appendChild(dateHeader);
                lastDate = entry.date;
            }

            const div = document.createElement('div');
            div.className = 'entry-item';
            div.innerHTML = `
                <span>${entry.text}</span>
                <button class="delete-btn" onclick="deleteEntry(${entry.id})">√ó</button>
            `;
            listContainer.appendChild(div);
        });

        updateStats();
    }

    // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
    addBtn.addEventListener('click', addEntry);
    input.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') addEntry();
    });

    // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
    render();

</script>

</body>
</html>